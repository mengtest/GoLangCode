---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2018/12/7 15:25
---




----------------------------玩家的数据-----------------------------
function RedisSavePlayerAll(User)
    --print("保存用户数据--------------------------")
    --print(MySerpent.block(User))
    --print("保存数据："..ZJson.encode(User))
    RedisSaveString(RedisDirAllPlayers..User.UserId,User.UserId, ZJson.encode(User))
end

-- 从数据库中读取玩家的数据
function RedisGetUserData(uid)
    local json =  ZJson.decode(RedisGetString(RedisDirAllPlayers..uid, uid))
    local user = User:New(uid,"")

    --printTable(user)
    -- 下面做一个遍历， 这个遍历的好处是 ，如果游戏更新，增加了字段， 不需要维护， 因为玩家登录的时候， 没有的字段会默认为初始值 ，再保存，新字段就有了
    for k,v in pairs(user) do
        if json[k] ~= nil then
            user[k] = json[k]       -- 将数据库保存数据赋值
        end
        --if type(v) == "string" then
        --    print(k.."    " .. v)
        --else
        --    print(k .."    "..type(v))
        --end
    end
    return  user
end

----------------------------玩家登录 open id -----------------------------
function RedisSavePlayerLogin(openId,Uid)
    RedisSaveString(RedisDirAllPlayersLogin..openId,openId, Uid)
end

function RedisGetPlayerLogin(openId)
    return  RedisGetString(RedisDirAllPlayersLogin..openId, openId)     -- 返回Uid
end

